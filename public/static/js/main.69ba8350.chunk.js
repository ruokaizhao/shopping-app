(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){},160:function(e,t,a){e.exports=a(287)},287:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),i=a.n(c),o=(a(112),a(6)),l=a(13),u=a(16),s=a(4),m=a(58),d=a.n(m),p=a(77),f=a(48),E=Object(f.b)("carts/fetchCarts",function(){var e=Object(p.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/users/".concat(t,"/carts")).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),h=Object(f.c)({name:"carts",initialState:{entities:[]},reducers:{cartAdded:function(e,t){e.entities.push(t.payload)},cartRemoved:function(e,t){var a=e.entities.findIndex(function(e){return e.id===t.payload});e.entities.splice(a,1)},cartUpdated:function(e,t){e.entities.find(function(e){return e.id===t.payload.id}).quantity=t.payload.quantity},cartCleared:function(e,t){e.entities=[]}},extraReducers:Object(s.a)({},E.fulfilled,function(e,t){e.entities=t.payload})}),b=h.actions,v=b.cartAdded,g=b.cartRemoved,j=b.cartUpdated,y=b.cartCleared,O=h.reducer;var w=function(e){var t=e.setUser,a=Object(l.f)(),c=Object(u.b)();return Object(n.useEffect)(function(){fetch("/api/logout",{method:"DELETE"}).then(function(){t({}),c(y()),a.push("/")})},[]),r.a.createElement("div",null)},x=a(20),S=a(312),C=a(331),k=a(140),T=a.n(k);var P=function(e){var t=e.setProducts,a=e.search,c=e.setSearch,i=Object(n.useCallback)(T()(function(e){return c(e.target.value)},1e3),[]);return r.a.createElement(S.a,{component:"form",onSubmit:function(e){e.preventDefault(),fetch("/api/search/".concat(a)).then(function(e){e.ok&&e.json().then(function(e){t(e)})})}},r.a.createElement(C.a,{variant:"filled",hiddenLabel:!0,size:"small",color:"secondary",onChange:function(e){i(e)}}))},q=a(335),I=a(336),D=a(341),W=a(342);var F=function(e){var t=e.user,a=e.setProducts,c=e.search,i=e.setSearch,o=Object(u.c)(function(e){return e.carts.entities}).reduce(function(e,t){return e+t.quantity},0),l=Object(u.b)();return Object(n.useEffect)(function(){t.id&&l(E(t.id))},[t.id]),r.a.createElement("div",null,r.a.createElement(D.a,{position:"static"},r.a.createElement(W.a,null,r.a.createElement(q.a,{container:!0},r.a.createElement(q.a,{item:!0},r.a.createElement(x.c,{to:"/",onClick:function(){i("")}},r.a.createElement(I.a,{color:"secondary"},"Home"))),r.a.createElement(q.a,{justifyContent:"flex-start",sx:{display:{xs:"none",md:"flex"},flexGrow:1,ml:3}},r.a.createElement(P,{setProducts:a,search:c,setSearch:i})),r.a.createElement(q.a,{item:!0,sx:{marginRight:1}},r.a.createElement(x.c,{to:"/orders"},r.a.createElement(I.a,{color:"secondary"},"Order History"))),r.a.createElement(q.a,{item:!0,sx:{marginRight:1}},r.a.createElement(x.c,{to:"/carts"},r.a.createElement(I.a,{color:"secondary"},"Cart: ",o))),r.a.createElement(q.a,{item:!0},t.id?r.a.createElement("div",null,"Hello, ",r.a.createElement("strong",null,t.name),r.a.createElement(x.c,{to:"/logout"},r.a.createElement(I.a,{color:"secondary"},"Logout"))):r.a.createElement("div",null,"Hello, ",r.a.createElement("strong",null,"guest"),r.a.createElement(x.c,{to:"/login"},r.a.createElement(I.a,{color:"secondary"},"Login")),r.a.createElement(x.c,{to:"/signup"},r.a.createElement(I.a,{color:"secondary"},"Signup")),r.a.createElement("br",null)))))))},A=a(11),J=a(28),N=a(337),R=a(329),_=a(345),L=a(79),U=a.n(L),B=a(344),z=a(343);var H=function(e){var t=e.onLogin,a=Object(n.useState)({username:"",password:"",password2:"",name:"",email:""}),c=Object(o.a)(a,2),i=c[0],u=c[1],m=Object(n.useState)([]),d=Object(o.a)(m,2),p=d[0],f=d[1],E=Object(l.f)();function h(e){u(Object(J.a)({},i,Object(s.a)({},e.target.name,e.target.value)))}return r.a.createElement("div",null,r.a.createElement(z.a,{component:"main",maxWidth:"xs"},r.a.createElement(R.a,null),r.a.createElement(S.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(N.a,{sx:{m:1,bgcolor:"secondary.main"}},r.a.createElement(U.a,null)),r.a.createElement(B.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement(S.a,{component:"form",onSubmit:function(e){e.preventDefault(),fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i.username,password:i.password,password_confirmation:i.password2,name:i.name,email:i.email})}).then(function(e){e.ok?e.json().then(function(e){t(e),E.push("/"),u({username:"",password:"",password2:"",name:"",email:""}),f([])}):e.json().then(function(e){return f(Object(A.a)(e.errors))})})},sx:{mt:3}},r.a.createElement(q.a,{container:!0,spacing:2},r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(C.a,{autoComplete:"name",name:"name",required:!0,fullWidth:!0,id:"name",label:"Name",autoFocus:!0,value:i.name,onChange:h})),r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(C.a,{required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",value:i.username,onChange:h})),r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(C.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:i.email,onChange:h})),r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(C.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:i.password,onChange:h})),r.a.createElement(q.a,{item:!0,xs:12,sx:{mb:2}},r.a.createElement(C.a,{required:!0,fullWidth:!0,name:"password2",label:"Comfirm password",type:"password",id:"password2",autoComplete:"confirm-password",value:i.password2,onChange:h}))),0!==p.length?p.map(function(e){return r.a.createElement(B.a,{color:"red",key:e},e)}):null,r.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2}},"Sign Up"),r.a.createElement(q.a,{container:!0,justifyContent:"flex-end"},r.a.createElement(q.a,{item:!0,sx:{mb:4}},r.a.createElement(_.a,{href:"/login",variant:"body2"},"Already have an account? Sign in")))))))},$=a(346),G=a(347),Z=a(348),K=a(349),M=a(350),Q=a(333),V=a(351),X=a(104),Y=a.n(X);var ee=function(e){var t=e.product,a=e.user,c=Object(n.useState)(!1),i=Object(o.a)(c,2),s=i[0],m=i[1],d=Object(l.h)(),p=Object(u.b)(),f=t.id,E=t.title,h=t.price,b=t.description,g=t.description_short,y=t.image,O=t.rating,w=Object(u.c)(function(e){return e.carts.entities}),S=Object(n.useState)([]),C=Object(o.a)(S,2),k=C[0],T=C[1];function P(){if(w.map(function(e){return e.title}).includes(t.title)){var e=w.find(function(e){return e.title===t.title}).id,n=w.find(function(e){return e.title===t.title}).quantity;fetch("/api/carts/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:n+1})}).then(function(e){e.ok?e.json().then(function(e){p(j(e)),m(function(e){return!e}),setTimeout(function(){m(function(e){return!e})},2e3)}):e.json().then(function(e){T(Object(A.a)(e.errors)),setTimeout(function(){T([])},2e3)})})}else fetch("/api/carts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:a.id,quantity:1,title:E,price:h,description:b,image:y})}).then(function(e){e.ok?e.json().then(function(e){p(v(e)),m(function(e){return!e}),setTimeout(function(){m(function(e){return!e})},2e3)}):e.json().then(function(e){T(Object(A.a)(e.errors)),setTimeout(function(){T([])},2e3)})})}return r.a.createElement("div",null,"/"===d.url?r.a.createElement($.a,{sx:{height:650},variant:"outlined"},r.a.createElement(G.a,null,r.a.createElement(x.b,{to:"products/".concat(f)},r.a.createElement(Z.a,{avatar:r.a.createElement(N.a,{"aria-label":"recipe"},r.a.createElement("img",{src:y,alt:E})),title:E,subheader:r.a.createElement("strong",null,"Price: $",h)}),r.a.createElement(K.a,{component:"img",height:"300",image:y,alt:E}))),r.a.createElement(M.a,null,r.a.createElement(B.a,{variant:"body2",color:"text.secondary"},r.a.createElement(Q.a,{name:"half-rating-read",value:parseFloat(O),precision:.5,readOnly:!0}),r.a.createElement("br",null)),r.a.createElement(B.a,{sx:{mt:2},variant:"h6"},"About this item:"),r.a.createElement(B.a,{paragraph:!0},g),s?r.a.createElement(B.a,{color:"secondary",sx:{mt:1}},"The item has been added to cart."):null,0!==k.length?k.map(function(e){return r.a.createElement(B.a,{color:"red",sx:{mt:1}},e)}):null),r.a.createElement(V.a,{disableSpacing:!0},r.a.createElement(I.a,{variant:"contained",startIcon:r.a.createElement(Y.a,null),onClick:P},"Add to cart"))):r.a.createElement("div",null,r.a.createElement($.a,{sx:{width:500}},r.a.createElement(Z.a,{avatar:r.a.createElement(N.a,{"aria-label":"recipe"},r.a.createElement("img",{src:y,alt:E})),title:E,subheader:r.a.createElement("strong",null,"Price: $",h)}),r.a.createElement(K.a,{component:"img",height:"300",image:y,alt:E}),r.a.createElement(M.a,null,r.a.createElement(B.a,{variant:"body2",color:"text.secondary"},r.a.createElement(Q.a,{name:"half-rating-read",value:parseFloat(O),precision:.5,readOnly:!0}),r.a.createElement("br",null)),r.a.createElement(B.a,{sx:{mt:2},variant:"h6"},"About this item:"),r.a.createElement(B.a,{paragraph:!0},b),s?r.a.createElement(B.a,{color:"secondary",sx:{mt:1}},"The item has been added to cart."):null,0!==k.length?k.map(function(e){return r.a.createElement(B.a,{color:"red",sx:{mt:1}},e)}):null),r.a.createElement(V.a,{disableSpacing:!0},r.a.createElement(I.a,{variant:"contained",startIcon:r.a.createElement(Y.a,null),onClick:P},"Add to cart")))))};var te=function(e){var t=e.products,a=e.user;return r.a.createElement("div",null,r.a.createElement(q.a,{container:!0},r.a.createElement(q.a,{item:!0,xs:0,md:1}),r.a.createElement(q.a,{item:!0,container:!0,xs:12,md:10,spacing:4},t.map(function(e){return r.a.createElement(q.a,{key:e.id,item:!0,xs:12,sm:6,md:4},r.a.createElement(ee,{product:e,user:a}))})),r.a.createElement(q.a,{item:!0,xs:0,md:1})))};var ae=function(e){var t=e.onLogin,a=Object(n.useState)({username:"",password:""}),c=Object(o.a)(a,2),i=c[0],u=c[1],m=Object(n.useState)([]),d=Object(o.a)(m,2),p=d[0],f=d[1],E=Object(l.f)();function h(e){u(Object(J.a)({},i,Object(s.a)({},e.target.name,e.target.value)))}return r.a.createElement("div",null,r.a.createElement(z.a,{component:"main",maxWidth:"xs"},r.a.createElement(R.a,null),r.a.createElement(S.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(N.a,{sx:{m:1,bgcolor:"secondary.main"}},r.a.createElement(U.a,null)),r.a.createElement(B.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(S.a,{component:"form",onSubmit:function(e){e.preventDefault(),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i.username,password:i.password})}).then(function(e){e.ok?e.json().then(function(e){t(e),E.push("/"),u({username:"",password:""}),f([])}):e.json().then(function(e){return f(Object(A.a)(e.errors))})})},sx:{mt:1}},r.a.createElement(C.a,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:i.username,onChange:h}),r.a.createElement(C.a,{sx:{mb:2},margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:i.password,onChange:h}),0!==p.length?p.map(function(e){return r.a.createElement(B.a,{color:"red",key:e},e)}):null,r.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2}},"Sign In"),r.a.createElement(q.a,{container:!0,justifyContent:"space-between"},r.a.createElement(q.a,{item:!0,sx:{mb:4}},r.a.createElement(_.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up")),r.a.createElement(q.a,{item:!0,sx:{mb:4}},r.a.createElement(_.a,{href:"/forgot_password",variant:"body2"},"Forgot your password?")))))))};var ne=function(e){var t=e.productInCart,a=Object(u.b)();return r.a.createElement("div",null,r.a.createElement($.a,{sx:{maxWidth:500,height:600,mb:2}},r.a.createElement(Z.a,{avatar:r.a.createElement(N.a,{"aria-label":"recipe"},r.a.createElement("img",{src:t.image,alt:t.title})),title:t.title,subheader:r.a.createElement("strong",null,"Price: $",t.price)}),r.a.createElement(K.a,{component:"img",height:"300",image:t.image,alt:t.title}),r.a.createElement(M.a,null,r.a.createElement(B.a,{variant:"h6",color:"text.secondary"},r.a.createElement(Q.a,{name:"half-rating-read",value:parseFloat(t.rating),precision:.5,readOnly:!0}),r.a.createElement("p",null,"Items: ",t.quantity),r.a.createElement("p",null,"Price: ",t.price*t.quantity))),r.a.createElement(V.a,null,t.quantity>1?r.a.createElement(I.a,{variant:"contained",onClick:function(){fetch("/api/carts/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:t.quantity-1})}).then(function(e){e.ok?e.json().then(function(e){return a(j(e))}):e.json().then(function(e){return console.log(e)})})}},"-"):r.a.createElement(I.a,{variant:"contained",onClick:function(){fetch("/api/carts/".concat(t.id),{method:"DELETE"}).then(function(e){e.ok?a(g(t.id)):e.json().then(function(e){return console.log(e)})})}},"Remove from cart"),r.a.createElement(I.a,{variant:"contained",onClick:function(){fetch("/api/carts/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:t.quantity+1})}).then(function(e){e.ok?e.json().then(function(e){return a(j(e))}):e.json().then(function(e){return console.log(e)})})}},"+"))))};var re=function(){var e=Object(u.c)(function(e){return e.carts.entities}),t=e.reduce(function(e,t){return e+t.quantity},0),a=e.reduce(function(e,t){return e+t.price*t.quantity},0);return r.a.createElement(S.a,{sx:{ml:5}},a>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(x.b,{to:"/checkout"},r.a.createElement(I.a,{variant:"contained",color:"secondary",sx:{marginBottom:4}},"Checkout")),r.a.createElement(B.a,{variant:"h4"},"Total items: ",t),r.a.createElement(B.a,{sx:{mb:2},variant:"h4"},"Total price: $",a),e.map(function(e){return r.a.createElement(ne,{key:e.id,productInCart:e})})):r.a.createElement(B.a,{variant:"h4",sx:{mb:4}},"There is nothing in the cart."))},ce=Object(f.b)("productDetails/fetchProductDetails",function(){var e=Object(p.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/products/".concat(t)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),ie=Object(f.c)({name:"productDetails",initialState:{entities:{}},reducers:{reviewAdded:function(e,t){e.entities.reviews.push(t.payload)},reviewRemoved:function(e,t){var a=e.entities.reviews.findIndex(function(e){return e.id===t.payload});e.entities.reviews.splice(a,1)},reviewUpdated:function(e,t){var a=e.entities.reviews.find(function(e){return e.id===t.payload.id});a.content=t.payload.content,a.rating=t.payload.rating}},extraReducers:Object(s.a)({},ce.fulfilled,function(e,t){e.entities=t.payload})}),oe=ie.actions,le=oe.reviewAdded,ue=oe.reviewRemoved,se=oe.reviewUpdated,me=ie.reducer;var de=a(330),pe=a(188),fe=a(95);var Ee=function(e){var t=e.review,a=e.userId,c=(e.isEditingReview,e.setIsEditingReview),i=Object(n.useState)(!1),l=Object(o.a)(i,2),s=l[0],m=l[1],d=Object(pe.a)({initialValues:{rating:t.rating,content:t.content},validationSchema:fe.a({rating:fe.b().required("Required"),content:fe.b().min(10,"Must be 10 characters or more").required("Content is required")}),onSubmit:function(){fetch("/api/reviews/".concat(t.id),{method:"PATCH",headers:{"Content-type":"application/json"},body:JSON.stringify({rating:parseInt(d.values.rating),content:d.values.content})}).then(function(e){e.ok&&(e.json().then(function(e){return E(se(e))}),m(function(e){return!e}))})}}),p=new Date(t.updated_at).toLocaleString(),f=a===t.user_id,E=Object(u.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{sx:{width:500},variant:"outlined"},r.a.createElement(M.a,null,r.a.createElement(B.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0},t.name),r.a.createElement(B.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0},r.a.createElement(Q.a,{name:"half-rating-read",size:"small",value:parseFloat(t.rating),precision:.5,readOnly:!0})),r.a.createElement(B.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0},p),r.a.createElement(B.a,{sx:{overflowWrap:"break-word"}},t.content)),r.a.createElement(V.a,null,f?r.a.createElement("div",null,r.a.createElement(I.a,{onClick:function(){m(function(e){return!e}),c(function(e){return!e})}},"Edit"),r.a.createElement(I.a,{onClick:function(){fetch("/api/reviews/".concat(t.id),{method:"DELETE"}).then(function(e){e.ok&&E(ue(t.id))})}},"Delete")):null)),s?r.a.createElement("form",{onSubmit:d.handleSubmit},r.a.createElement(C.a,{sx:{width:500,mt:3},id:"content",name:"content",autoFocus:!0,value:d.values.content,onChange:d.handleChange,onBlur:d.handleBlur,error:d.touched.content&&Boolean(d.errors.content),helperText:d.touched.content&&d.errors.content,variant:"outlined",label:"Enter your review...",multiline:!0,rows:5}),r.a.createElement(q.a,{container:!0},r.a.createElement(q.a,{item:!0,sx:{mt:2,flexGrow:1}},r.a.createElement(Q.a,{id:"rating",name:"rating",error:!(!d.touched.rating||!Boolean(d.errors.rating))||void 0,value:parseInt(d.values.rating),onChange:d.handleChange})),r.a.createElement(q.a,{item:!0,sx:{mt:2}},r.a.createElement(I.a,{variant:"outlined",type:"submit"},"Submit your review")))):null)};var he=function(e){var t=e.userId,a=Object(n.useState)(!1),c=Object(o.a)(a,2),i=c[0],l=c[1],m=Object(n.useState)({rating:"",content:""}),d=Object(o.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)([]),h=Object(o.a)(E,2),b=h[0],v=h[1],g=Object(u.b)(),j=Object(u.c)(function(e){return e.productDetails.entities});function y(e){f(Object(J.a)({},p,Object(s.a)({},e.target.name,e.target.value)))}return r.a.createElement(de.a,null,r.a.createElement(B.a,{variant:"h4"},"Reviews"),j.reviews.map(function(e){return r.a.createElement(Ee,{key:e.id,review:e,userId:t,setIsEditingReview:l,isEditingReview:i})}),r.a.createElement(I.a,{sx:{mt:3},onClick:function(){return l(function(e){return!e})}},i?"Cancel":"Start a new review?"),r.a.createElement("br",null),i?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{sx:{width:500,mt:3,mb:2},id:"review_content",name:"content",autoFocus:!0,value:p.content,onChange:y,variant:"outlined",label:"Enter your review...",multiline:!0,rows:5}),r.a.createElement("br",null),0!==b.length?b.map(function(e){return r.a.createElement(B.a,{color:"red"},e)}):null,r.a.createElement(q.a,{container:!0},r.a.createElement(q.a,{item:!0,sx:{mt:2,flexGrow:1}},r.a.createElement(Q.a,{name:"rating",value:parseInt(p.rating),onChange:y})),r.a.createElement(q.a,{item:!0,sx:{mt:2}},r.a.createElement(I.a,{variant:"outlined",type:"submit",onClick:function(e){e.preventDefault(),fetch("/api/reviews",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({user_id:t,product_id:j.id,rating:parseInt(p.rating),content:p.content})}).then(function(e){e.ok?e.json().then(function(e){g(le(e)),f({rating:"",content:""}),v([])}):e.json().then(function(e){return v(Object(A.a)(e.errors))})})}},"Submit your review")))):null)};var be=function(e){var t=e.user,a=e.products,c=Object(l.g)(),i=Object(u.c)(function(e){return e.productDetails.entities}),o=Object(u.b)(),s=a.find(function(e){return e.id===parseInt(c.productId)})||{};return Object(n.useEffect)(function(){o(ce(c.productId))},[]),r.a.createElement("div",null,r.a.createElement(q.a,{container:!0,direction:"column",spacing:4,alignContent:"center"},r.a.createElement(q.a,{item:!0,justifyContent:"center"},r.a.createElement(ee,{product:s,user:t})),r.a.createElement(q.a,{item:!0,sx:{mb:4}},i.reviews?r.a.createElement(he,{userId:t.id}):null)))},ve=a(106);var ge=function(e){var t=e.userId,a=Object(n.useState)({id:"",fullname:"",street:"",city:"",state:"",zipcode:""}),c=Object(o.a)(a,2),i=c[0],m=c[1],d=Object(n.useState)([]),p=Object(o.a)(d,2),f=p[0],E=p[1],h=Object(n.useState)(""===i.fullname),b=Object(o.a)(h,2),v=b[0],j=b[1],y=Object(n.useState)(!0),O=Object(o.a)(y,2),w=O[0],x=O[1],k=Object(u.c)(function(e){return e.carts.entities}),T=k.reduce(function(e,t){return e+t.price*t.quantity},0),P=Object(u.b)(),D=Object(l.f)();function W(e){m(Object(J.a)({},i,Object(s.a)({},e.target.name,e.target.value)))}function F(e){e.preventDefault(),""===i.id?fetch("/api/addresses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(J.a)({},i,{user_id:t}))}).then(function(e){e.ok?(k.forEach(function(e){e.id,N(Object(ve.a)(e,["id"])),R(e.id)}),x(function(e){return!e}),E([])):e.json().then(function(e){return E(Object(A.a)(e.errors))})}):fetch("/api/addresses/".concat(i.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(J.a)({},i,{user_id:t}))}).then(function(e){e.ok?(k.forEach(function(e){e.id,N(Object(ve.a)(e,["id"])),R(e.id)}),x(function(e){return!e}),E([])):e.json().then(function(e){return E(Object(A.a)(e.errors))})})}function N(e){fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function R(e){fetch("/api/carts/".concat(e),{method:"DELETE"}).then(function(){return P(g(e))})}return Object(n.useEffect)(function(){t&&fetch("/api/users/".concat(t,"/addresses")).then(function(e){e.ok&&e.json().then(function(e){null!==e&&(m(e),j(!1))})})},[t]),r.a.createElement("div",null,w?r.a.createElement("div",null,v?r.a.createElement(z.a,{component:"main",maxWidth:"sm"},r.a.createElement(S.a,{component:"form",onSubmit:F,sx:{mt:3}},r.a.createElement(q.a,{container:!0,spacing:4},r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(C.a,{id:"fullname",fullWidth:!0,name:"street",value:i.street,onChange:W,variant:"outlined",label:"Street"})),r.a.createElement(q.a,{item:!0,xs:12,sm:6},r.a.createElement(C.a,{id:"fullname",fullWidth:!0,name:"fullname",value:i.fullname,onChange:W,variant:"outlined",label:"Fullname"})),r.a.createElement(q.a,{item:!0,xs:12,sm:6},r.a.createElement(C.a,{id:"fullname",fullWidth:!0,name:"city",value:i.city,onChange:W,variant:"outlined",label:"City"})),r.a.createElement(q.a,{item:!0,xs:12,sm:6},r.a.createElement(C.a,{id:"fullname",fullWidth:!0,name:"state",value:i.state,onChange:W,variant:"outlined",label:"State"})),r.a.createElement(q.a,{item:!0,sx:{mb:2},xs:12,sm:6},r.a.createElement(C.a,{id:"fullname",fullWidth:!0,name:"zipcode",value:i.zipcode,onChange:W,variant:"outlined",label:"Zipcode"})),0!==f.length?r.a.createElement(q.a,{container:!0,direction:"column"},f.map(function(e){return r.a.createElement(B.a,{sx:{ml:4,mt:3},key:e,color:"red"},e)})):null,r.a.createElement(I.a,{fullWidth:!0,sx:{ml:4,mt:3,mb:2},type:"submit",variant:"contained"},"Place your order")))):r.a.createElement($.a,{sx:{minWidth:275}},r.a.createElement(M.a,null,r.a.createElement(B.a,{variant:"h5",gutterBottom:!0},r.a.createElement("p",null,"Total price: ",T),r.a.createElement("p",null,"Name: ",i.fullname),r.a.createElement("p",null,"Street: ",i.street),r.a.createElement("p",null,"City: ",i.city),r.a.createElement("p",null,"State: ",i.state),r.a.createElement("p",null,"Zip code: ",i.zipcode))),r.a.createElement(V.a,null,r.a.createElement(I.a,{variant:"contained",onClick:F},"Place your order"),r.a.createElement(I.a,{variant:"contained",onClick:function(){j(function(e){return!e})}},"Edit address")))):r.a.createElement("div",null,r.a.createElement(B.a,{variant:"h5",sx:{mb:3}},"We have received your order, you will be notified when the order is dispatched, thank you for being our customer!"),r.a.createElement(I.a,{sx:{mb:3},variant:"outlined",onClick:function(){return D.push("/")}},"Keep shopping?")))};var je=function(e){var t=e.user,a=Object(n.useState)([]),c=Object(o.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)(function(){t.id&&fetch("/api/users/".concat(t.id,"/orders")).then(function(e){e.ok&&e.json().then(function(e){return l(e)})})},[t.id]),r.a.createElement("div",null,0!==i.length?r.a.createElement(q.a,{container:!0,sx:{mb:10}},r.a.createElement(q.a,{item:!0,xs:0,sm:1}),r.a.createElement(q.a,{item:!0,container:!0,xs:12,sm:10,spacing:12},i.map(function(e){return r.a.createElement(q.a,{key:e.id,item:!0,xs:12,sm:4},r.a.createElement($.a,{sx:{maxWidth:500,height:600}},r.a.createElement(Z.a,{avatar:r.a.createElement(N.a,{"aria-label":"recipe"},r.a.createElement("img",{src:e.image,alt:e.title})),title:e.title,subheader:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,"Price: $",e.price),r.a.createElement("br",null),r.a.createElement("strong",null,"Quantity: ",e.quantity))}),r.a.createElement(K.a,{component:"img",height:"500",image:e.image,alt:e.title})))})),r.a.createElement(q.a,{item:!0,xs:0,sm:1})):r.a.createElement(B.a,{variant:"h4",sx:{mb:4}},"There is nothing here."))},ye=a(288),Oe=a(338),we=a(340),xe=a(177);var Se=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),l=Object(o.a)(i,2),u=l[0],s=l[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/forgot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}).then(function(e){e.ok?e.json().then(function(e){return s(e.alerts)}):e.json().then(function(e){return s(e.errors)})})}},r.a.createElement("label",{htmlFor:"forgot-password-email"},"Please enter your email:"),r.a.createElement("input",{type:"email",id:"forgot-password-email",value:a,onChange:function(e){return c(e.target.value)}}),r.a.createElement("button",{type:"submit"},"Submit")),u.map(function(e,t){return r.a.createElement("p",{key:t},e)}))};var Ce=function(e){var t=e.setUser,a=Object(n.useState)([]),c=Object(o.a)(a,2),i=c[0],u=c[1],m=Object(n.useState)({email:"",password:"",password2:""}),d=Object(o.a)(m,2),p=d[0],f=d[1],E=Object(l.g)(),h=Object(l.f)();function b(e){f(Object(J.a)({},p,Object(s.a)({},e.target.name,e.target.value)))}return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:E.token,email:p.email,password:p.password,password_confirmation:p.password2})}).then(function(e){e.ok?e.json().then(function(e){t(e.user),u(e.alerts),setTimeout(function(){h.push("/")},2e3)}):e.json().then(function(e){return u(e.errors)})})}},r.a.createElement("label",{htmlFor:"reset-password-email"},"Please enter your email:"),r.a.createElement("input",{type:"email",id:"reset-password-email",value:p.email,name:"email",onChange:b}),r.a.createElement("label",{htmlFor:"reset-password-password"},"Please enter your password:"),r.a.createElement("input",{type:"password",id:"reset-password-password",value:p.password,name:"password",onChange:b}),r.a.createElement("label",{htmlFor:"reset-password-password2"},"Please confirm your password:"),r.a.createElement("input",{type:"password",id:"reset-password-password2",value:p.password2,name:"password2",onChange:b}),r.a.createElement("button",{type:"submit"},"Submit"),i.map(function(e,t){return r.a.createElement("p",{key:t},e)})))},ke=Object(ye.a)({palette:{primary:xe.a}});var Te=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),s=Object(o.a)(i,2),m=s[0],d=s[1],p=Object(u.c)(function(e){return e.productDetails.entities}),f=Object(n.useState)(""),E=Object(o.a)(f,2),h=E[0],b=E[1];return Object(n.useEffect)(function(){fetch("/api/me").then(function(e){e.ok&&e.json().then(function(e){return c(e)})})},[]),Object(n.useEffect)(function(){fetch("/api/search/".concat(h)).then(function(e){e.ok&&e.json().then(function(e){return d(e)})})},[a,p,h]),r.a.createElement("div",null,r.a.createElement(Oe.a,{theme:ke},r.a.createElement(we.a,{elevation:3},r.a.createElement(q.a,{container:!0,direction:"column",spacing:4},r.a.createElement(q.a,{item:!0},r.a.createElement(F,{user:a,setProducts:d,search:h,setSearch:b})),r.a.createElement(q.a,{item:!0},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/signup"},r.a.createElement(H,{onLogin:c})),r.a.createElement(l.a,{path:"/logout"},r.a.createElement(w,{setUser:c,setProducts:d})),r.a.createElement(l.a,{path:"/login"},r.a.createElement(ae,{onLogin:c})),r.a.createElement(l.a,{path:"/carts"},r.a.createElement(re,null)),r.a.createElement(l.a,{path:"/products/:productId"},r.a.createElement(be,{user:a,products:m})),r.a.createElement(l.a,{path:"/checkout"},r.a.createElement(ge,{userId:a.id})),r.a.createElement(l.a,{path:"/orders"},r.a.createElement(je,{user:a})),r.a.createElement(l.a,{path:"/forgot_password"},r.a.createElement(Se,null)),r.a.createElement(l.a,{path:"/reset_password/:token"},r.a.createElement(Ce,{setUser:c})),r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(te,{products:m,user:a}))))))))},Pe=Object(f.a)({reducer:{carts:O,productDetails:me}});i.a.render(r.a.createElement(x.a,null,r.a.createElement(u.a,{store:Pe},r.a.createElement(Te,null))),document.getElementById("root"))}},[[160,2,1]]]);
//# sourceMappingURL=main.69ba8350.chunk.js.map