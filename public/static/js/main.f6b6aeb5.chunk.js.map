{"version":3,"sources":["components/Logout.js","features/cartSlice.js","components/SearchBar.js","components/NavBar.js","components/Signup.js","components/Product.js","components/Home.js","components/Login.js","components/ProductInCart.js","components/Carts.js","features/productDetailSlice.js","components/Review.js","components/Reviews.js","components/ProductDetail.js","components/Checkout.js","components/OrderHistory.js","components/App.js","store.js","index.js"],"names":["Logout","_ref","setUser","setProducts","history","useHistory","useEffect","fetch","method","then","push","react_default","a","createElement","fetchCarts","createAsyncThunk","Object","asyncToGenerator","regenerator_default","mark","_callee","userId","wrap","_context","prev","next","abrupt","concat","r","json","data","stop","_x","apply","this","arguments","cartsSlice","createSlice","name","initialState","entities","reducers","cartAdded","state","action","payload","cartRemoved","index","findIndex","product","id","splice","cartUpdated","find","quantity","extraReducers","defineProperty","fulfilled","actions","SearchBar","_useState","useState","_useState2","slicedToArray","search","setSearch","onSubmit","e","preventDefault","ok","products","errors","console","log","type","value","onChange","target","NavBar","user","itemsInCarts","useSelector","carts","reduce","previous","current","dispatch","useDispatch","AppBar","position","Toolbar","Grid","container","item","xs","react_router_dom","to","Typography","components_SearchBar","Signup","onLogin","username","password","password2","email","formData","setFormData","handleChange","objectSpread","headers","Content-Type","body","JSON","stringify","password_confirmation","htmlFor","Product","match","useRouteMatch","title","price","description","image","rating","handleCartClick","map","includes","productIdInCarts","productQuantityInCarts","user_id","url","Card","sx","maxWidth","height","CardHeader","avatar","Avatar","aria-label","src","alt","subheader","Fragment","CardMedia","component","CardContent","variant","color","CardActions","disableSpacing","IconButton","onClick","AddShoppingCart_default","bgcolor","red","Home","md","spacing","key","sm","components_Product","Login","ProductInCart","productInCart","Cart","total","components_ProductInCart","fetchProductDetails","productId","productDetailsSlice","reviewAdded","reviews","reviewRemoved","review","reviewUpdated","content","Review","isEditing","setIsEditing","_useState3","_useState4","_useState5","_useState6","defaultReviewRating","setDefaultReviewRating","currentUser","updated_at","Content-type","reviewReturned","defaultChecked","Reviews","productDetails","components_Review","product_id","ProductDetail","params","useParams","components_Reviews","Checkout","fullname","street","city","zipcode","isPlaced","setIsPlaced","handleCheckoutSubmit","forEach","cart","cartId","postOrder","objectWithoutProperties","address","OrderHistory","orders","setOrders","length","order","App","direction","components_NavBar","react_router","path","components_Signup","components_Logout","components_Login","Carts","components_ProductDetail","components_Checkout","components_OrderHistory","exact","components_Home","store","configureStore","reducer","cartsReducer","productDetailsReducer","ReactDOM","render","es","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.f6b6aeb5.chunk.js","sourcesContent":["import React, { useEffect } from 'react';\nimport { useHistory } from \"react-router-dom\";\n\nfunction Logout({ setUser, setProducts }) {\n  const history = useHistory()\n\n  useEffect(() => {\n    fetch(\"/api/logout\", {\n      method: \"DELETE\"\n    })\n    .then(() => {\n      setUser({})\n      setProducts([])\n      history.push(\"/\")\n    })\n  }, [])\n\n  return (\n    <div>      \n    </div>\n  );\n}\n\nexport default Logout;","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\n// The return value of createAsyncThunk will be the action.payload in the corresponding reducers in the extraReducers.\nexport const fetchCarts = createAsyncThunk(\"carts/fetchCarts\", async (userId) => {\n  return fetch(`/api/users/${userId}/carts`)\n  .then((r) => r.json())\n  .then((data) => data)\n})\n\nconst cartsSlice = createSlice({\n  name: \"carts\",\n  initialState: {\n    entities: []\n  },\n  reducers: {\n    cartAdded(state, action) {\n      state.entities.push(action.payload)\n    },\n    cartRemoved(state, action) {\n      const index = state.entities.findIndex((product) => product.id === action.payload)\n      state.entities.splice(index, 1)\n    },\n    cartUpdated(state, action) {\n      const item = state.entities.find((product) => product.id === action.payload.id)\n      item.quantity = action.payload.quantity\n    }\n  },\n  extraReducers: {\n    [fetchCarts.fulfilled](state, action) {\n      state.entities = action.payload\n    }\n  }\n})\n\nexport const { cartAdded, cartRemoved, cartUpdated } = cartsSlice.actions;\nexport default cartsSlice.reducer;","import React, { useState } from 'react';\n\nfunction SearchBar({ setProducts }) {\n  const [search, setSearch] = useState(\"\")\n\n  function handleSearchChange(e) {\n    setSearch(e.target.value)\n  }\n\n  function handleSearchSubmit(e) {\n    e.preventDefault()\n    fetch(`/api/search/${search}`)\n    .then((r) => {\n      if(r.ok) {\n        r.json().then((products) => setProducts(products))\n      } else {\n        r.json().then((errors) => console.log(errors))\n      }\n    })\n    // If there is only get \"/search/:search\" route, no get \"/search\" route in the backend, we need the following code to separate search of\n    // \"\" or \" \" from other searches, since the search of \"\" or \" \" will hit \"/search\" instead of \"/search/:search\" route, resulting in\n    // RoutingError.\n\n    // if (search.replace(/\\s/g, \"\") === \"\") {\n    //   fetch(\"/api/products\")\n    //   .then((r) => {\n    //     if (r.ok) {\n    //       r.json().then((products) => onSearch(products))\n    //     } else {\n    //       r.json().then((errors) => console.log(errors))\n    //     }\n    //   })\n    // } else {\n    //   fetch(`api/search/${search}`)\n    //   .then((r) => {\n    //     if (r.ok) {\n    //       r.json().then((products) => onSearch(products))\n    //     } else {\n    //       r.json().then((errors) => console.log(errors))\n    //     }\n    //   })\n    // }\n  }\n\n  return (\n    <div>\n      <form onSubmit={handleSearchSubmit}>\n        <input type=\"text\" id=\"searchbar\" name=\"searchbar\" value={search} onChange={handleSearchChange} />\n        <button type=\"submit\">Search</button>\n      </form>\n      \n    </div>\n  );\n}\n\nexport default SearchBar;","import React, { useEffect } from 'react';\nimport { NavLink } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchCarts } from '../features/cartSlice';\nimport SearchBar from './SearchBar';\nimport { Grid, Typography } from '@mui/material';\nimport { AppBar, Toolbar } from \"@mui/material\";\n\nfunction NavBar({ user, setProducts }) {\n  const carts = useSelector((state) => state.carts.entities)\n  const itemsInCarts = carts.reduce((previous, current) => previous + current.quantity, 0)\n  const dispatch = useDispatch()\n\n  // Since setUser in the App component is async, it will return user at a later time. Thus userId will be null the first time.\n  // Thus the return data from server will be null since the url containing userId will be invalid, that will cause null.reduce, \n  // which is an error. So I add an if statement to only run the code within useEffect if the userId exists.\n  // After the user data comes back, setUser will re-render components, this time useId exists, but in order to let code within useEffect\n  // run the second time, the dependency array need to be the data that changes, in this case, userId, instead of []\n  useEffect(() => {\n    if (user.id) {\n      dispatch(fetchCarts(user.id))\n    }    \n  }, [user.id])\n\n  return (\n    <div>\n      <AppBar position=\"static\" >\n        <Toolbar >\n          <Grid container>\n\n            <Grid item xs={1}>\n              <NavLink to=\"/\">\n                <Typography>\n                  Home\n                </Typography>             \n              </NavLink>\n            </Grid>\n            \n            <Grid item xs={8} >\n              <SearchBar setProducts={setProducts} />\n            </Grid>\n\n            <Grid item xs={1} >\n              {user.id ? \n              <div>\n                Hello, <strong>{user.name}</strong><br/>\n                <NavLink to=\"/logout\">Logout</NavLink>\n              </div> : \n              <div>\n                Hello, <strong>guest</strong><br/>\n                <NavLink to=\"/login\">Login</NavLink><br/>\n                <NavLink to=\"/signup\">Signup</NavLink><br/>\n              </div>}  \n            </Grid>\n\n            <Grid item xs={1} >\n              <NavLink to=\"/orders\">\n              Orders History\n              </NavLink> \n            </Grid>\n\n            <Grid item xs={1} >\n              <NavLink to=\"/carts\">Cart: {itemsInCarts}</NavLink>\n            </Grid>\n\n          </Grid> \n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\nexport default NavBar;","import React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\n\nfunction Signup({ onLogin }) {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\",\n    password2: \"\",\n    name: \"\",\n    email: \"\"\n  })\n\n  const history = useHistory()\n\n  function handleChange(e) {\n    setFormData({...formData, [e.target.name]: e.target.value})\n  }\n\n  function handleFormSubmit(e) {\n    e.preventDefault()\n    fetch(\"/api/signup\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: formData.username,\n        password: formData.password,\n        password_confirmation: formData.password2,\n        name: formData.name,\n        email: formData.email\n      })\n    })\n    .then((r) => {\n      if (r.ok) {\n        r.json().then((user) => {\n          onLogin(user)\n          history.push(\"/\")\n          setFormData({\n            username: \"\",\n            password: \"\",\n            password2: \"\",\n            name: \"\",\n            email: \"\" \n          })\n        })\n      } else {\n        r.json().then((errors) => console.log(errors))\n      }\n    })\n  }\n\n  return (\n    <div>\n      <form onSubmit={handleFormSubmit}>\n        <label htmlFor=\"username\">Please enter your username:</label><br/>\n        <input type=\"text\" id=\"username\" name=\"username\" value={formData.username} onChange={handleChange} /><br/>\n        <label htmlFor=\"password\">Please enter your password:</label><br/>\n        <input type=\"password\" id=\"password\" name=\"password\" value={formData.password} onChange={handleChange} /><br/>\n        <label htmlFor=\"password2\">Please confirm your password:</label><br/>\n        <input type=\"password\" id=\"password2\" name=\"password2\" value={formData.password2} onChange={handleChange} /><br/>\n        <label htmlFor=\"name\">Please enter your name:</label><br/>\n        <input type=\"text\" id=\"name\" name=\"name\" value={formData.name} onChange={handleChange} /><br/>\n        <label htmlFor=\"email\">please enter your email:</label><br/>\n        <input type=\"email\" id=\"email\" name=\"email\" value={formData.email} onChange={handleChange} /><br/>\n        <button type=\"submit\">Submit</button>\n      </form>      \n    </div>\n  );\n}\n\nexport default Signup;","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { cartAdded, cartUpdated } from '../features/cartSlice';\nimport { Card, CardHeader, CardMedia, CardContent, CardActions, Avatar, IconButton, Typography } from '@mui/material';\nimport { red } from '@mui/material/colors';\nimport AddShoppingCartIcon from '@mui/icons-material/AddShoppingCart';\n\nfunction Product({ product, user }) {\n  const match = useRouteMatch()\n  const dispatch = useDispatch()\n  const { id, title, price, description, image, rating } = product\n  const carts = useSelector((state) => state.carts.entities)\n\n  function handleCartClick() {\n    const productTitlesInCarts = carts.map((item) => item.title)\n    \n    if (productTitlesInCarts.includes(product.title)) {\n      const productIdInCarts = carts.find((item) => item.title === product.title).id\n      const productQuantityInCarts = carts.find((item) => item.title === product.title).quantity\n      fetch(`/api/carts/${productIdInCarts}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          quantity: productQuantityInCarts + 1\n        })\n      })\n      .then((r) => {\n        if (r.ok) {\n          r.json().then((data) => dispatch(cartUpdated(data)))\n        } else {\n          r.json().then((errors) => console.log(errors))\n        }\n      })\n    } else {\n      fetch(\"/api/carts\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user_id: user.id,\n          quantity: 1,\n          title,\n          price,\n          description,\n          image\n        })\n      })\n      .then((r) => {\n        if (r.ok) {\n          r.json().then((data) => dispatch(cartAdded(data)))\n        } else {\n          r.json().then((errors) => console.log(errors))\n        }\n      })\n    }    \n  }\n\n  return (\n    <div>\n      {match.url === \"/\" \n      ?\n      <Card sx={{ maxWidth: 500, height: 600 }}>\n        <Link to={`products/${id}`}>\n          <CardHeader\n            avatar={\n              <Avatar aria-label=\"recipe\">\n                <img src={image} alt={title} />\n              </Avatar>\n            }        \n            title={title}\n            subheader={\n              <>\n                <strong>Price: ${price}</strong>\n                <strong>Rating: {rating}</strong>\n              </>\n            }\n          />\n          <CardMedia\n            component=\"img\"\n            height=\"300\"\n            image={image}\n            alt={title}\n          />\n        </Link>\n        <CardContent>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            This impressive paella is a perfect party dish and a fun meal to cook\n            together with your guests. Add 1 cup of frozen peas along with the mussels,\n            if you like.\n          </Typography>\n        </CardContent>\n        <CardActions disableSpacing>\n          <IconButton aria-label=\"add shopping cart\" onClick={handleCartClick} >\n            <AddShoppingCartIcon />\n          </IconButton>       \n        </CardActions>          \n      </Card>\n      : \n      <div>\n        <Card sx={{ maxWidth: 500, height: 600 }}>\n          <CardHeader\n            avatar={\n              <Avatar sx={{ bgcolor: red[500] }} aria-label=\"recipe\">\n                R\n              </Avatar>\n            }        \n            title={title}\n            subheader={<strong>Price: ${price}</strong>}\n          />\n          <CardMedia\n            component=\"img\"\n            height=\"300\"\n            image={image}\n            alt={title}\n          />\n          <CardContent>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              This impressive paella is a perfect party dish and a fun meal to cook\n              together with your guests. Add 1 cup of frozen peas along with the mussels,\n              if you like.\n            </Typography>\n          </CardContent>\n          <CardActions disableSpacing>\n            <IconButton aria-label=\"add shopping cart\" onClick={handleCartClick} >\n              <AddShoppingCartIcon/>\n            </IconButton>       \n          </CardActions>          \n        </Card>\n      </div>}           \n    </div>    \n  );\n}\nexport default Product;","import { Grid } from '@mui/material';\nimport React from 'react';\nimport Product from './Product';\n\nfunction Home({ products, user }) {\n\n  return (\n    <div>\n      <Grid container >\n        <Grid item xs={0} md={1} />\n        <Grid item container xs={12} md={10} spacing={12}>\n          {products.map((product) => {\n            return(\n              <Grid key={product.id} item xs={12} sm={6} md={4}>\n                <Product  product={product} user={user} />\n              </Grid>            \n            )\n          })}  \n        </Grid>        \n        <Grid item xs={0} md={1} /> \n      </Grid>         \n    </div>\n  );\n}\nexport default Home;","import React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\n\nfunction Login({ onLogin }) {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\"\n  })\n  const history = useHistory()\n\n  function handleChange(e) {\n    setFormData({...formData, [e.target.name]: e.target.value})\n  }\n\n  function handleLoginSubmit(e) {\n    e.preventDefault()\n    fetch(\"/api/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: formData.username,\n        password: formData.password\n      })\n    })\n    .then((r) => {\n      if (r.ok) {\n        r.json().then((user) => {\n          onLogin(user)\n          history.push(\"/\")\n          setFormData({\n            username: \"\",\n            password: \"\"\n          })\n        })\n      } else {\n        r.json().then((errors) => console.log(errors))\n      }\n    })\n  }\n\n\n  return (\n    <div>\n      <form onSubmit={handleLoginSubmit}>\n        <label htmlFor=\"username\">Please enter your username:</label><br/>\n        <input type=\"text\" id=\"username\" name=\"username\" value={formData.username} onChange={handleChange}/><br/>\n        <label htmlFor=\"password\">Please enter your password:</label><br/>\n        <input type=\"password\" id=\"password\" name=\"password\" value={formData.password} onChange={handleChange}/><br/>\n        <button type=\"submit\">Submit</button>\n      </form>\n      \n    </div>\n  );\n}\n\nexport default Login;","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { cartRemoved, cartUpdated } from '../features/cartSlice';\n\nfunction ProductInCart({ productInCart }) {\n  const dispatch = useDispatch()\n\n  function handleMinusCartClick() {\n    fetch(`/api/carts/${productInCart.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        quantity: productInCart.quantity - 1\n      })\n    })\n    .then((r) => {\n      if (r.ok) {\n        r.json().then((data) => dispatch(cartUpdated(data)))\n      } else {\n        r.json().then((errors) => console.log(errors))\n      }\n    })\n  }\n\n  function handleRemoveCartClick() {\n    fetch(`/api/carts/${productInCart.id}`, {\n      method: \"DELETE\"\n    })\n    .then((r) => {\n      if (r.ok) {\n        dispatch(cartRemoved(productInCart.id))\n      } else {\n        r.json().then((errors) => console.log(errors))\n      }\n    })\n  }\n\n  function handleAddCartClick() {\n    fetch(`/api/carts/${productInCart.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        quantity: productInCart.quantity + 1\n      })\n    })\n    .then((r) => {\n      if (r.ok) {\n        r.json().then((data) => dispatch(cartUpdated(data)))\n      } else {\n        r.json().then((errors) => console.log(errors))\n      }\n    })\n  }\n\n  return (\n    <div>\n      <h2>Title: {productInCart.title}</h2>\n      <h2>Price: {productInCart.price}</h2>\n      <h2>Quantity: {productInCart.quantity}</h2>\n      <img src={productInCart.image} alt={productInCart.title} />\n      {productInCart.quantity > 1 \n      ? <button onClick={handleMinusCartClick}>-</button>\n      : <button onClick={handleRemoveCartClick}>Remove from cart</button>\n      }\n      <button onClick={handleAddCartClick}>+</button>           \n    </div>\n  );\n}\n\nexport default ProductInCart;","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport ProductInCart from \"./ProductInCart\";\n\nfunction Cart() {\n  const carts = useSelector((state) => state.carts.entities)\n  // To use reduce on an array of objects, the first argument cannot be the first element in the array, since it will later be used as previous\n  // value, and that value cannot have keys of the containing object. So, you need to pass in a initial value of 0, to make the previous equal\n  // to 0, and the second argument, current will start at index 0, and you can use dot notation to access the value in the object.\n  const total = carts.reduce((previous, current) => previous + current.price * current.quantity, 0)\n\n\n  return (\n    <div>\n      <p>Total price: {total}</p>\n      {carts.map((productInCart) => {\n        return (\n          <ProductInCart key={productInCart.id} productInCart={productInCart} />\n        )\n      })}\n      <Link to=\"/checkout\">\n        <button>Checkout</button>\n      </Link>     \n    </div>\n  );\n}\n\nexport default Cart;","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\nexport const fetchProductDetails = createAsyncThunk(\"productDetails/fetchProductDetails\", async (productId) => {\n  return fetch(`/api/products/${productId}`)\n  .then((r) => r.json())\n  .then((data) => data)\n})\n\nconst productDetailsSlice = createSlice({\n  name: \"productDetails\",\n  initialState: {\n    entities: {}\n  },\n  reducers: {\n    reviewAdded(state, action) {\n      state.entities.reviews.push(action.payload)\n    },\n    reviewRemoved(state, action) {\n      const index = state.entities.reviews.findIndex((review) => review.id === action.payload)\n      state.entities.reviews.splice(index, 1)\n    },\n    reviewUpdated(state, action) {\n      const review = state.entities.reviews.find((item) => item.id === action.payload.id)\n      review.content = action.payload.content\n      review.rating = action.payload.rating\n    }\n  },\n  extraReducers: {\n    [fetchProductDetails.fulfilled](state, action) {\n      state.entities = action.payload \n    } \n  }\n})\n\nexport const { reviewAdded, reviewRemoved, reviewUpdated } = productDetailsSlice.actions;\nexport default productDetailsSlice.reducer;","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { reviewRemoved, reviewUpdated } from '../features/productDetailSlice';\n\nfunction Review({ review, userId }) {\n  const [isEditing, setIsEditing] = useState(false)\n  const [formData, setFormData] = useState({\n    rating: \"\",\n    content: review.content\n  })\n  const [defaultReviewRating, setDefaultReviewRating] = useState(\"\")\n  const currentUser = userId === review.user_id\n  const dispatch = useDispatch()\n\n  function handleEditClick() {\n    setIsEditing((isEditing) => !isEditing)\n    setDefaultReviewRating(review.rating)\n  }\n\n  function handleChange(e) {\n    setFormData({...formData, [e.target.name]: e.target.value})\n  }\n\n  function handleReviewSubmit(e) {\n    e.preventDefault()\n    fetch(`/api/reviews/${review.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        rating: formData.rating,\n        content: formData.content\n      })\n    })\n    .then((r) => {\n      if (r.ok) {\n        r.json().then((reviewReturned) => dispatch(reviewUpdated(reviewReturned)))\n        setFormData({\n          rating: \"\",\n          content: formData.content\n        })\n        setIsEditing((isEditing) => !isEditing)\n      }\n    })\n  }\n\n  function handleDeleteClick() {\n    fetch(`/api/reviews/${review.id}`, {\n      method: \"DELETE\"\n    })\n    .then((r) => {\n      if (r.ok) {\n        dispatch(reviewRemoved(review.id))\n      }\n    })\n  }\n\n  return (\n    <div>\n      <p>{review.name}</p>\n      <p>{review.updated_at}</p>\n      <p>{review.rating}</p>\n      <p>{review.content}</p>\n      {currentUser ? \n      <div>\n        <button onClick={handleEditClick}>Edit</button> \n        <button onClick={handleDeleteClick}>Delete</button> \n      </div>\n      : null}\n      {isEditing ? \n       <form onSubmit={handleReviewSubmit}> \n        <div onChange={handleChange}>       \n          <input type=\"radio\" id=\"review_rating1\" name=\"rating\" value={1} defaultChecked={defaultReviewRating === 1}/>\n          <label htmlFor=\"review_rating1\">1</label><br/>\n          \n          <input type=\"radio\" id=\"review_rating2\" name=\"rating\" value={2} defaultChecked={defaultReviewRating === 2}/>\n          <label htmlFor=\"review_rating2\">2</label><br/>\n        \n          <input type=\"radio\" id=\"review_rating3\" name=\"rating\" value={3} defaultChecked={defaultReviewRating === 3}/>\n          <label htmlFor=\"review_rating3\">3</label><br/>\n          \n          <input type=\"radio\" id=\"review_rating4\" name=\"rating\" value={4} defaultChecked={defaultReviewRating === 4}/>\n          <label htmlFor=\"review_rating4\">4</label><br/>\n          \n          <input type=\"radio\" id=\"review_rating5\" name=\"rating\" value={5} defaultChecked={defaultReviewRating === 5}/>\n          <label htmlFor=\"review_rating5\">5</label><br/>\n        </div>\n\n        <label htmlFor=\"review_content\">Enter your review:</label><br/>\n        <textarea id=\"review_content\" name=\"content\" value={formData.content} onChange={handleChange}/><br/>\n        \n        <button type=\"submit\">Submit your review</button>\n      </form>\n      : null}     \n    </div>\n  );\n}\n\nexport default Review;","import React, { useState } from 'react';\nimport Review from \"./Review\";\nimport { reviewAdded } from \"../features/productDetailSlice\";\nimport { useDispatch, useSelector } from 'react-redux';\n\nfunction Reviews({ userId }) {\n  const [formData, setFormData] = useState({\n    rating: \"\",\n    content: \"\"\n  })\n  const dispatch = useDispatch()\n  const productDetails = useSelector((state) => state.productDetails.entities)\n\n  function handleChange(e) {\n    setFormData({...formData, [e.target.name]: e.target.value})\n  }\n\n  function handleReviewSubmit(e) {\n    e.preventDefault()\n    fetch(\"/api/reviews\", {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user_id: userId,\n        product_id: productDetails.id,\n        rating: formData.rating,\n        content: formData.content\n      })\n    })\n    .then((r) => {\n      if (r.ok) {\n        r.json().then((review) => dispatch(reviewAdded(review)))\n      }\n      setFormData({\n        rating: \"\",\n        content: \"\"\n      })\n    })\n  }\n\n  return (\n    <div>\n      {productDetails.reviews.map((review) => {\n        return (\n          <Review key={review.id} review={review} userId={userId} />\n        )\n      })}\n      <form onSubmit={handleReviewSubmit}> \n        <div onChange={handleChange}>       \n          <input type=\"radio\" id=\"review_rating1\" name=\"rating\" value={1}/>\n          <label htmlFor=\"review_rating1\">1</label><br/>\n          \n          <input type=\"radio\" id=\"review_rating2\" name=\"rating\" value={2}/>\n          <label htmlFor=\"review_rating2\">2</label><br/>\n        \n          <input type=\"radio\" id=\"review_rating3\" name=\"rating\" value={3}/>\n          <label htmlFor=\"review_rating3\">3</label><br/>\n          \n          <input type=\"radio\" id=\"review_rating4\" name=\"rating\" value={4}/>\n          <label htmlFor=\"review_rating4\">4</label><br/>\n          \n          <input type=\"radio\" id=\"review_rating5\" name=\"rating\" value={5}/>\n          <label htmlFor=\"review_rating5\">5</label><br/>\n        </div>\n\n        <label htmlFor=\"review_content\">Enter your review:</label><br/>\n        <textarea id=\"review_content\" name=\"content\" value={formData.content} onChange={handleChange}/><br/>\n        \n        <button type=\"submit\">Submit your review</button>\n      </form>      \n    </div>\n  );\n}\n\nexport default Reviews;","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport Product from \"./Product\";\nimport { fetchProductDetails } from '../features/productDetailSlice';\nimport Reviews from \"./Reviews\";\n\nfunction ProductDetail({ user }) {\n  const params = useParams()\n  const productDetails = useSelector((state) => state.productDetails.entities)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(fetchProductDetails(params.productId))\n  }, [params.productId])\n\n  return (\n    <div>\n      <Product product={productDetails} user={user} />\n      {productDetails.reviews ?\n      <Reviews userId={user.id} />\n      : null}\n    </div>\n  );\n}\n\nexport default ProductDetail;","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { cartRemoved } from '../features/cartSlice';\n\nfunction Checkout({ userId }) {\n  const [formData, setFormData] = useState({\n    id: \"\",\n    fullname: \"\",\n    street: \"\",\n    city: \"\",\n    state: \"\",\n    zipcode: \"\"\n  })\n  console.log(formData)\n  const [isEditing, setIsEditing] = useState(formData.fullname === \"\")\n  const [isPlaced, setIsPlaced] = useState(true)  \n  const carts = useSelector((state) => state.carts.entities)\n  const total = carts.reduce((previous, current) => previous + current.price * current.quantity, 0)\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  useEffect(() => {\n    if (userId) {\n      fetch(`/api/users/${userId}/addresses`)\n      .then((r) => {\n        if (r.ok) {\n          r.json().then((address) => {\n            if (address !== null) {\n              setFormData(address)\n              setIsEditing(false)\n              // Why does the below code log empty formData?\n              console.log(formData)\n            }          \n          })\n        } else {\n          r.json().then((errors) => console.log(errors))\n        }\n      })\n    }    \n  }, [userId])\n\n  function handleChange(e) {\n    setFormData({...formData, [e.target.name]: e.target.value})\n  }\n\n  function handleEditAddressClick() {\n    setIsEditing((isEditing) => !isEditing)\n  }\n\n  function handleCheckoutSubmit(e) {\n    e.preventDefault()\n    postAddress()    \n    carts.forEach((cart) => {\n      const {id, ...cartNoId} = cart\n      postOrder(cartNoId)\n      deleteCart(cart.id)\n      setIsPlaced((isPlaced) => !isPlaced)\n    })\n  }\n\n  function postAddress() {\n    fetch(\"/api/addresses\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        ...formData, user_id: userId\n      })\n    })\n  }\n\n  function postOrder(cart) {\n    fetch(\"/api/orders\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(cart)\n    })\n  }\n\n  function deleteCart(cartId) {\n    fetch(`/api/carts/${cartId}`, {\n      method: \"DELETE\"\n    })\n    .then(() => dispatch(cartRemoved(cartId))) \n  }  \n\n  return (\n    <div>\n      {isPlaced\n      ?\n      <div>\n        {isEditing\n        ?\n        <form onSubmit={handleCheckoutSubmit}>\n          <label htmlFor=\"fullname\">Name:</label><br/>\n          <input type=\"text\" id=\"fullname\" name=\"fullname\" value={formData.fullname} onChange={handleChange}/><br/>\n          <label htmlFor=\"street\">Street:</label><br/>\n          <input type=\"text\" id=\"street\" name=\"street\" value={formData.street} onChange={handleChange}/><br/>\n          <label htmlFor=\"city\">City:</label><br/>\n          <input type=\"text\" id=\"city\" name=\"city\" value={formData.city} onChange={handleChange}/><br/>\n          <label htmlFor=\"state\">State:</label><br/>\n          <input type=\"text\" id=\"state\" name=\"state\" value={formData.state} onChange={handleChange}/><br/>\n          <label htmlFor=\"zipcode\">Zip code:</label><br/>\n          <input type=\"text\" id=\"zipcode\" name=\"zipcode\" value={formData.zipcode} onChange={handleChange}/><br/>          \n          <button type=\"submit\">Place your order</button>\n        </form>\n        :\n        <div>\n          <p>Total price: {total}</p>\n          <p>Address:</p>\n          <p>Name: {formData.fullname}</p>\n          <p>Street: {formData.street}</p>\n          <p>City: {formData.city}</p>\n          <p>State: {formData.state}</p>\n          <p>Zip code: {formData.zipcode}</p>\n          <button onClick={handleCheckoutSubmit}>Place your order</button>      \n          <button onClick={handleEditAddressClick}>Edit address</button> \n        </div>}  \n      </div>\n      :\n      <div>\n        <p>We have received your order, you will be notified when the order is dispatched, thank you for being our customer!</p>\n        <button onClick={() => history.push(\"/\")}>Keep shopping?</button>\n      </div>\n      }    \n    </div>\n  );\n}\n\nexport default Checkout;","import React, { useEffect, useState } from 'react';\n\nfunction OrderHistory({ user }) {\n  const [orders, setOrders] = useState([])\n\n  useEffect(() => {\n    if (user.id) {\n      fetch(`/api/users/${user.id}/orders`)\n      .then((r) => {\n        if (r.ok) {\n          r.json().then((orders) => setOrders(orders))\n        }\n      })\n    }    \n  }, [user.id])\n  console.log(orders)\n\n  return (\n    <div>\n      {orders.length !== 0\n      ?\n      <div>\n        {orders.map((order) => {\n          return (\n            <div key={order.id}>\n              <p>{order.title}</p>\n              <p>{order.price}</p>\n              <p>{order.quantity}</p>\n              <img src={order.image} alt={order.title}/>\n            </div>\n          )\n        })}\n      </div>   \n      :\n      <p>There is nothing here</p>}    \n    </div>\n  )\n}\n\nexport default OrderHistory;","import React, { useState, useEffect } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Logout from \"./Logout\";\nimport NavBar from \"./NavBar\";\nimport Signup from \"./Signup\";\nimport Home from \"./Home\";\nimport Login from \"./Login\";\nimport Cart from \"./Carts\";\nimport ProductDetail from \"./ProductDetail\";\nimport Checkout from \"./Checkout\";\nimport OrderHistory from \"./OrderHistory\";\nimport { Grid } from \"@mui/material\";\n\nfunction App() {\n  const [user, setUser] = useState({})\n  const [products, setProducts] = useState([])\n\n  useEffect(() => {\n    fetch(\"/api/me\")\n    .then((r) => {\n      if (r.ok) {\n        r.json().then((user) => setUser(user))\n      } else {\n        r.json().then((errors) => console.log(errors))\n      }\n    })\n  }, [])\n\n  useEffect(() => {\n    fetch(\"/api/products\")\n    .then((r) => {\n      if (r.ok) {\n        r.json().then((products) => setProducts(products))\n      } else {\n        r.json().then((errors) => console.log(errors))\n      }\n    })\n  }, [user])\n\n  return (\n    <div>\n      <Grid container direction=\"column\" spacing={8}>\n        <Grid item >          \n          <NavBar user={user} setProducts={setProducts} />                  \n        </Grid>  \n\n        <Grid item>\n          <Switch>\n            <Route path=\"/signup\">\n              <Signup onLogin={setUser} />\n            </Route>\n            <Route path=\"/logout\">\n              <Logout setUser={setUser} setProducts={setProducts} />\n            </Route>\n            <Route path=\"/login\">\n              <Login onLogin={setUser} />\n            </Route>\n            <Route path=\"/carts\">\n              <Cart />\n            </Route>\n            <Route path=\"/products/:productId\">\n              <ProductDetail user={user}/>\n            </Route>\n            <Route path=\"/checkout\">\n              <Checkout userId={user.id} />\n            </Route>\n            <Route path=\"/orders\">\n              <OrderHistory user={user} />\n            </Route>\n            <Route exact path=\"/\">\n              <Home products={products} user={user} />\n            </Route>        \n          </Switch> \n        </Grid>         \n      \n          \n      </Grid>   \n        \n    </div>\n  )\n}\n\nexport default App;","import { configureStore } from \"@reduxjs/toolkit\";\nimport cartsReducer from \"./features/cartSlice\";\nimport productDetailsReducer from \"./features/productDetailSlice\";\n\nconst store = configureStore({\n  reducer: {\n    carts: cartsReducer,\n    productDetails: productDetailsReducer\n  }\n})\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { BrowserRouter as Router } from \"react-router-dom\"\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport \"./index.css\"\n\nReactDOM.render(\n  <Router>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </Router>,    \n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}